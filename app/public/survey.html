<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
  <title>Friend Finder</title>
</head>



<body>
  <div class="container">
    <form>
      <div class="jumbotron">
        <h1 class="display-4">Survey Statements</h1>
        <hr class="my-4">
        <p>Tell us about you and provide a photo!</p>
      </div>
      <div class="form-group">
        <label for="exampleInputEmail1">
          <strong>Name</strong>
        </label>
        <input type="text" class="form-control name-validate" placeholder="Enter Name (Required)" id="name">
      </div>
      <div class="form-group">
        <label for="exampleInputPassword1">
          <strong>Link to photo of you</strong>
        </label>
        <input type="text" class="form-control photo-validate" placeholder="Link (Required)" id="photo">
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>I am a morning person.</strong>
        </label>
        <select class="form-control" id="res1">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>Coffee makes me happy.</strong>
        </label>
        <select class="form-control select-validate" id="res2">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>I eat only to survive.</strong>
        </label>
        <select class="form-control" id="res3">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>I am not easily annoyed.</strong>
        </label>
        <select class="form-control" id="res4">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>I prefer phone call over text messages.</strong>
        </label>
        <select class="form-control" id="res5">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>I like adventure.</strong>
        </label>
        <select class="form-control" id="res6">
          <option>1 (Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>Singing in the car is encouraged.</strong>
        </label>
        <select class="form-control" id="res7">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>Daily showers are just a suggestion.</strong>
        </label>
        <select class="form-control" id="res8">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>If I see a puppy, I must pet it.</strong>
        </label>
        <select class="form-control" id="res9">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">
          <strong>I believe Donald Trump is a good president.</strong>
        </label>
        <select class="form-control" id="res10">
          <option value="1">1 (Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly agree)</option>
        </select>
      </div>
      <button id="submit" type="submit" class="btn btn-primary" data-toggle="modal" data-target="#resultsModal">Submit</button>
    </form>

    <div id="resultsModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content -->
        <div class="modal-content">
          <div class="modal-header">
            <!-- <button type="button" class="close" data-dismiss="modal">Close</button> -->
            <h2 class="modal-title">Your New Best Friend is...</h2>
          </div>
          <div class="modal-body">
            <h2 id="bestFriend"></h2>
            <img id="friendImage" src="" alt="" width="200">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>
  </div>
  <!-- Once you've found the current user's most compatible friend, display the result as a modal pop-up.

The modal should display both the name and picture of the closest match. -->
  <script type="text/javascript">
    $("#submit").on("click", function (event) {
      event.preventDefault();

      let validated = true;

      if ($(".name-validate").val() === '') {
        validated = false;
        $(".name-validate").addClass('is-invalid');
        return false;
      } else {
      $(".name-validate").removeClass('is-invalid');
    };

     if ($(".photo-validate").val() === '') {
        validated = false;
        $(".photo-validate").addClass('is-invalid');
        return false;
      } else {
      $(".photo-validate").removeClass('is-invalid');
    };

      //grab the values from the form and push the response number values into an array
      var newFriend = {
        name: $('#name').val().trim(),
        photo: $('#photo').val().trim(),
        scores: [
          parseInt($('#res1').val()),
          parseInt($('#res2').val()),
          parseInt($('#res3').val()),
          parseInt($('#res4').val()),
          parseInt($('#res5').val()),
          parseInt($('#res6').val()),
          parseInt($('#res7').val()),
          parseInt($('#res8').val()),
          parseInt($('#res9').val()),
          parseInt($('#res10').val())
        ]
      };

      $.post("/api/friends", newFriend)
        .done(function (data) {
          console.log(data);
          console.log("name is: " + data.name)
          $("#resultsModal").modal('toggle');
          $("#bestFriend").text(data.name);
          $('#friendImage').attr("src", data.photo);

        });

    });
  </script>

</body>

</html>